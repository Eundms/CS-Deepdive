# 링크계층(2계층)
## 하는 일
1. 프레임화 : 네트워크 계층 데이터그램을 링크 계층 프레임에 캡슐화함
2. 링크 접속 : MAC 프로토콜
3. 신뢰적 전달 : 확인 응답과 재전송을 통해 가능, 무선링크에서 사용, 오류가 발생한 링크에서 오류를 정정  
4. 오류검출과정정 

- 네트워크 인터페이스 카드(NIC)로 알려진 네트워크 어뎁터에 구현된다 

## 오류 검출 및 정정 기술; 비트 수준 오류 검출과 정정 
> 오류 검출 및 정정 기술에는 패리티 검사, 체크섬, 순환중복검사(CRC)가 있다   
### 패리티 검사
패리티 비트를 활용하여 홀수 개의 비트 오류가 발생했음을 알 수 있다 (하지만, 짝수 개의 비트 오류는 검사 못함)  
따라서 2차원 패리티 기법을 사용한다 

### 체크섬 방법; 트랜스포트 계층에서 사용
호스트 운영체제의 일부로서 소프트웨어로 구현되기 때문에 빠른 오류 검출 기법이 필요하다   

### 순환중복검사 (CRC); 링크 계층에서 사용 
어댑터 안의 전용 하드웨어로 오류 검출이 일어난다   
https://ko.wikipedia.org/wiki/%EC%88%9C%ED%99%98_%EC%A4%91%EB%B3%B5_%EA%B2%80%EC%82%AC


## 다중 접속 링크와 프로토콜 (p.414)
### 점대점 링크, 브로드캐스트 링크 => 다중 접속 문제(multiple access problem)
- 점대점 링크 : 링크의 한쪽 끝에 한 송신자와 링크의 다른 쪽 끝에 한 수신자가 있음
- 브로드캐스트 링크 : 공유된 브로드캐스트 채널에 다수의 송신 노드 및 수신 노드들이 연결됨
- 다중 접속 문제 : 다수의 송수신 노드들의 공유되는 브로드캐스트 채널로의 접속을 조정하는 문제

### 다중 접속 프로토콜에서 발생할 수 있는 문제점
- 모든 노드들이 프레임을 전송할 수 있으므로, 2개 이상의 노드가 동시에 프레임을 전송할 수 있음
- 모든 노드는 동시에 여러 개의 프레임을 받게 되어 전송된 프레임들이 각 수신자에서 충돌함
    - 충돌이 발생하면 어떤 수신 노드도 전송된 프레임의 의미를 파악할 수 없음 

> 해결하기 위한 링크 계층 기술 : 채널 분할 프로토콜, 랜덤 접속 프로토콜, 순번 프로토콜

```
1. 하나의 노드가 전송할 데이터 >> R bps의 처리율
2. M개의 노드가 전송할 데이터 >> R/M bps의 처리율
3. 이 프로토콜은 분산되어 있으며, 고장으로 인해 전체 시스템을 정지시킬 수 있는 마스터 노드가 없음
4. 단순해서 구현하는데 비용이 적게 들음
```

## 채널 분할 프로토콜(channel partitioning protocol) 
### 1. 시분할 다중화 Time Division Multiplexing(TDM) 
- 채널이 N개의 노드를 지원, 채널 전송률이 Rbps라고 하자 
- 시간 프레임(time frame)으로 나누고 각 시간 프레임을 N개의 시간 슬롯(time slot)으로 나눈다
- 각 시간 슬롯은 N개의 노드들에 할당된다 
- 노드는 전송할 패킷이 있을 때마다 TDM 프레임에서 자신에게 할당된 시간 슬롯 동안 패킷 비트들을 전송한다 
- 슬롯 크기는 한 패킷이 한 슬롯 시간 동안 전송될 수 있게 선택된다
1. 전송할 패킷이 있는 노드가 단 하나인 경우에도 노드의 전송률이 평균 R/N으로 제한된다
2. 노드가 전송 순서상 자신의 차례를 항상 기다려야 한다

### 2. 주파수 분할 다중화 Frequency Division Multiplexing(FDM)
- Rbps의 채널을 다른 주파수(각 R/N개의 대역폭을 가짐)로 나누어 각 주파수를 N개 노드 중 하나에게 할당한다 
- 하나의 큰 Rbps 채널로부터 N개의 R/N bps 의 작은 채널을 만든다 
### 3. 코드분할 다중 접속(CDMA)
- 다른 코드를 각 노드에게 할당한다. 노드는 전송하는 데이터 비트들을 자신의 유일한 코드로 인코딩한다 
- 반전파방해 특성을 가지고 있기에 군사 시스템에서 사용되어 왔다 

## 랜덤 접속 프로토콜(random access protocol)
전송노드는 항상 채널의 최대 전송률인 Rbps로 전송한다. 충돌이 발생하면 충돌과 관련된 각 노드는 패킷이 충돌 없이 전송될 때까지 자신의 프레임을 계속해서 재전송한다. 그러나 충돌했을 때 노드는 해당 프레임을 즉시 재전송할 필요가 없다. 대신 그 프레임을 재전송하기 전에 랜덤 지연 시간 동안 기다린다.  

#### CSMA vs CSMA/CD
- CSMA는 충돌이 발생해도 이를 감지하지 않고 충돌 후 데이터를 재전송하므로, 충돌 관리가 비효율적.
- CSMA/CD는 충돌을 감지하고 빠르게 전송을 중단하고 랜덤 지연 후, 재전송. 충돌 검출 기능 있음. 충돌로 인한 리소스 낭비를 줄임.
> CSMA는 무선 환경에서 주로 사용되며, CSMA/CD는 유선 환경(특히 이더넷)에서 널리 사용됨.


| **특징**      | **CSMA**   | **CSMA/CD**       |
|-------------------------------|------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|
| **풀네임**                   | Carrier Sense Multiple Access | Carrier Sense Multiple Access with Collision Detection |
| **캐리어 감지**              | 채널이 사용 중인지 확인 후 데이터 전송. | 채널이 사용 중인지 확인 후 데이터 전송.   |
| **충돌 발생 시 처리**         | 충돌을 감지하지 못하며, 충돌 시 데이터가 손실되고 노드는 랜덤 지연 후 재전송.  | 충돌을 감지하여 즉시 전송을 중단하고, 랜덤 지연 후 재전송. |
| **충돌 검출 기능**           | 없음     | 있음 (충돌을 빠르게 감지).                                                                   |
| **전송 효율**                | 충돌이 발생하면 재전송으로 인해 대역폭 낭비가 많음.    | 충돌 발생 후 즉시 중단하여 대역폭 낭비를 줄임.         |
| **충돌 가능성**              | 충돌 가능성이 높음 (특히, 채널이 바쁜 경우).      | 충돌 가능성이 비교적 낮음 (충돌 발생 시 빠르게 해결).                                        |
| **사용 사례**                | 무선 네트워크(Wi-Fi) 등 충돌 검출이 어려운 환경.   | 유선 네트워크(특히 이더넷)에서 주로 사용.                                                   |
| **장점**                     | 구현이 단순하며, 하드웨어 비용이 저렴.   | 충돌을 감지해 효율적으로 재전송을 관리함.                                                   |
| **단점**                     | 충돌 관리 미흡으로 대규모 네트워크에서 비효율적. | 충돌 검출 및 처리 기능으로 인해 하드웨어 복잡성과 비용 증가.                                 |



## 스위치 근거리 네트워크 (LAN)
### 링크 계층 주소체계와 ARP
- IP 주소(논리적): 네트워크 계층에서 사용하며, 전송 시 목적지와 송신지를 식별.
- MAC 주소(물리적): 데이터 링크 계층에서 사용하며, 네트워크 내 장치를 유일하게 식별.
- ARP (Address Resolution Protocol): IP 주소를 기반으로 해당 IP의 MAC 주소를 확인.
### 스위치와 라우터의 차이
- 스위치
    - 데이터 링크 계층(2계층) 장치로, MAC 주소를 기반으로 프레임을 전송.
    - 같은 네트워크 내의 장치 간 데이터 전송을 관리.
- 라우터
    - 네트워크 계층(3계층) 장치로, IP 주소를 기반으로 패킷을 전송.
    - 서로 다른 네트워크 간 데이터 전송을 관리.

### VLAN (Virtual LAN)
하나의 물리적 네트워크를 논리적으로 분할하여 여러 가상 네트워크를 생성.
- 장점:
    - 트래픽 분리: 네트워크 세그먼트를 나누어 불필요한 트래픽 감소.
    - 보안 강화: 서로 다른 VLAN 간 트래픽을 차단함으로써 네트워크 보안성 향상.
    - 유연성: 물리적 위치에 상관없이 논리적으로 네트워크를 구성 가능.
- 사용 사례: 기업 내 부서별 네트워크 분리, 민감한 데이터 보호를 위한 네트워크 격리.

